/*
* jQuery Multi-Column-Select v0.1
*
* Copyright (c) 2014 DanSmith
*
* Licensed under MIT
*
*/

(function(e){function t(t){var n=e(t).outerHeight(true)-e(t).innerHeight();var r=e(t).height();return r+n}function n(e,t){return Math.round(100/r(e,t))}function r(t,n){var r=e(t).width();var i=e(n).width();var s=100*r/i;return Math.round(s)}e.fn.MultiColumnSelect=function(r){var i=e.extend({menuclass:"columnselect",openmenu:"openmenubutton",openmenutext:"Choose An Option",menucontainer:"menucontainer",menuitem:"menuitem",idprefix:"msc-",showitemtext:true,hideclass:"hidden",openclass:"open",clearclass:"clear",duration:200},r);$selector=this.selector;$control=e($selector+" select");$selectoptions=e($selector+" select option");$optioncount=0;$optionvals=[];$optionids=[];$control.addClass(i.menuclass).addClass(i.hideclass);e($selector).append("<a class='"+i.openmenu+"'>"+i.openmenutext+"</a><div class='"+i.clearclass+"'></div><div class='"+i.menucontainer+"'></div>");$selectoptions.each(function(t){$optioncount+=1;var n="";if(i.showitemtext==true)n=e(this).text();e("."+i.menucontainer).append("<a class='"+i.menuitem+"' data='"+e(this).attr("value")+"' id='"+i.idprefix+$optioncount+"'>"+n+"</a>")});e($selector).delegate("a."+i.menuitem,"click",function(t){e($selector).find("select").val(e(this).attr("data"));e("a."+i.menuitem).removeClass("active");e(this).addClass("active");t.preventDefault()});e($selector).delegate("a."+i.openmenu,"click",function(r){if(e(this).hasClass(i.openclass)){e(this).removeClass(i.openclass);e("."+i.menucontainer).animate({height:0},i.duration,function(){e("."+i.menucontainer).hide()})}else{e(this).addClass(i.openclass);e("."+i.menucontainer).height(0).show();$total=Math.round($optioncount/n("."+i.menuitem,"."+i.menucontainer));$blockheight=t("."+i.menuitem);var s=e("."+i.menucontainer).css("padding-top");var o=e("."+i.menucontainer).css("padding-top");s=parseInt(s.match(/[0-9]+/g));o=parseInt(o.match(/[0-9]+/g));padding=s+o;$newheight=$total*$blockheight+padding;e("."+i.menucontainer).animate({height:$newheight},i.duration)}r.preventDefault()});return this};})(jQuery)