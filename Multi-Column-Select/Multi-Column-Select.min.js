/*
* jQuery Multi-Column-Select v0.1
*
* Copyright (c) 2014 DanSmith
*
* Licensed under MIT
*
*/

(function(e){function t(e){basewidth=e.width();padleft=e.css("padding-left");padright=e.css("padding-right");marleft=e.css("margin-left");marright=e.css("margin-right");padleft=parseInt(padleft.match(/[0-9]+/g));padright=parseInt(padright.match(/[0-9]+/g))}function n(e,t){return Math.round(100/r(e,t))}function r(e,t){var n=e.width();var r=t.width();var i=100*n/r;return Math.round(i)}e.fn.MultiColumnSelect=function(n){$selector=this.selector;var r=[];$optioncount=0;var i=e.extend({menuclass:"columnselect",openmenu:"openmenubutton",openmenutext:"Choose An Option",menucontainer:"menucontainer",menuitem:"menuitem",idprefix:"msc-",showitemtext:true,hideclass:"hidden",openclass:"open",clearclass:"clear",multiple:false,duration:200,onClose:null,onOpen:null},n);this.append("<a class='"+i.openmenu+"'>"+i.openmenutext+"</a><div class='"+i.menucontainer+"'></div> ");this.find("select option").each(function(t,n){$optioncount+=1;var r="";if(i.showitemtext==true)r=e(this).text();e(this).parent().siblings("."+i.menucontainer).append("<a class='"+i.menuitem+"' data='"+e(this).attr("value")+"' id='"+i.idprefix+$optioncount+"'>"+r+"</a>")});this.find("."+i.menuitem).on("click",function(t){$itemdata=e(this).attr("data");if(i.multiple==false){e(this).parent().siblings("select").val($itemdata);e(this).siblings("a."+i.menuitem).removeClass("active");e(this).addClass("active")}if(i.multiple==true){if(e(this).hasClass("active")){e(this).removeClass("active");var n=$itemdata;r.splice(e.inArray(n,r),1)}else{e(this).addClass("active");r.push($itemdata)}e($selector).find("select").val(r)}t.preventDefault()});t(e(this).find("."+i.menucontainer));this.find("."+i.openmenu).on("click",function(t){if(e(this).hasClass(i.openclass)){e(this).removeClass(i.openclass);e(this).next().slideToggle("slow",function(){e.isFunction(i.onClose)&&i.onClose.call(this)})}else{e(this).addClass(i.openclass);e(this).next().slideToggle("slow",function(){e.isFunction(i.onOpen)&&i.onOpen.call(this)})}t.preventDefault()});return this};})(jQuery)
