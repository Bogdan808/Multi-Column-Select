/*
* jQuery Multi-Column-Select v0.1
*
* Copyright (c) 2014 DanSmith
*
* Licensed under MIT
*
*/
(function(e){function t(t){var n=e(t).outerHeight(true)-e(t).innerHeight();var r=e(t).height();return r+n}function n(e){return Math.round(100/r(e))}function r(t){var n=e(t).width();var r=e(t).offsetParent().width();var i=100*n/r;return Math.round(i)}e.fn.MultiColumnSelect=function(r){var i=e.extend({menuclass:"columnselect",openmenu:"openmenubutton",openmenutext:"Choose An Option",menucontainer:"menucontainer",menuitem:"menuitem",hideclass:"hidden",openclass:"open",clearclass:"clear",duration:200},r);$selector=this.selector.replace(".","");$control=e("."+$selector+" select");$selectoptions=e("."+$selector+" select option");$optioncount=0;$optionvals=[];$optionids=[];$control.addClass(i.menuclass).addClass(i.hideclass);$selectoptions.each(function(t){$optioncount+=1;$optionvals.push(e(this).text());$optionids.push(e(this).attr("value"))});e("."+$selector).append("<a class='"+i.openmenu+"'>"+i.openmenutext+"</a>\n                                <div class='"+i.clearclass+"'></div><div class='"+i.menucontainer+"'></div>");e.each($optionvals,function(t,n){e("."+i.menucontainer).append("<a class='"+i.menuitem+"' data='"+$optionids[t]+"'>"+n+"</a>")});e("."+$selector).delegate("a."+i.menuitem,"click",function(t){e("."+$selector).find("select").val(e(this).attr("data"));e("a."+i.menuitem).removeClass("active");e(this).addClass("active");t.preventDefault()});e("."+$selector).delegate("a."+i.openmenu+"","click",function(r){if(e(this).hasClass(i.openclass)){e(this).removeClass(i.openclass);e("."+i.menucontainer).animate({height:0},i.duration)}else{e(this).addClass(i.openclass);$total=Math.round($optioncount/n("."+i.menuitem));$blockheight=t("."+i.menuitem);$newheight=$total*$blockheight;e("."+i.menucontainer).animate({height:$newheight},i.duration)}r.preventDefault()});return this};})(jQuery)
